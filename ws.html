<html>

<body>
    <title>前端工具箱</title>
    <h1>websocket在线测试工具</h1>

    <input type="text" id="addr"> <button id="btn">开始连接</button>
    <br>
    <br>
    <br>

    <textarea name="" id="area" cols="30" rows="5"></textarea> <button id="send">发送</button>
    <br>
    <br>
    <br>
    <div id="msg-list">

    </div>
</body>
<script>
    var ws
    var addr = document.getElementById('addr')
    var button = document.getElementById('btn')
    var area = document.getElementById('area')
    var list = document.getElementById('msg-list')
    
    button.addEventListener('click', function () {
        console.log(addr.value)
        ws = new WebSocket(addr.value);

        ws.addEventListener('message', function (event) {
        item = document.createElement('p')
        item.innerText = 'receive: ' + event.data
        list.appendChild(item)
    });
    })


    var btn = document.getElementById('send')
    btn.addEventListener('click', function() {
        ws.send(area.value)
        item = document.createElement('p')
        item.innerText = 'send: ' + area.value
        list.appendChild(item)
    })

    // // open
    // ws.addEventListener('open', function (event) {
    //     ws.send('hello world\n')
    // });

    
</script>

</html>